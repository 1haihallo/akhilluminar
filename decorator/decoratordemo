def smart_sub(fn):
